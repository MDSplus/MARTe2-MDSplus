+MDS_EVENTS = {
  Class = MDSEventManager
  StackSize = 1048576
  CPUs = 0x1
  Name = CICCIO
}
$CICCIO = {
 Class = RealTimeApplication
 +Functions = {
  Class = ReferenceContainer
  +IDLE_MDSPLUS = {
    Class = IOGAM
    InputSignals = {
      Counter = {
        DataSource = IDLE_MDSPLUS_TIMER
        Type = uint32
        NumberOfElements = 1
      }
      Time = {
        DataSource = IDLE_MDSPLUS_TIMER
        Type = uint32
        NumberOfElements = 1
        Frequency = 10
      }
    }
    OutputSignals = {
      Counter = {
        DataSource = IDLE_MDSPLUS_DDB
        Type = uint32
      }
      Time = {
        DataSource = IDLE_MDSPLUS_DDB
        Type = uint32
        NumberOfElements = 1
      }
    }
  }
  +GAM1Timer_IOGAM = {
    Class = IOGAM
    InputSignals = {
      Counter = {
        DataSource = GAM1_Timer
        Type = uint32
        NumberOfElements = 1
      }
      Time = {
        DataSource = GAM1_Timer
        Type = uint32
        NumberOfElements = 1
        Frequency = 10
      }
    }
    OutputSignals = {
      Counter = {
        DataSource = GAM1_Timer_DDB
        Type = uint32
      }
      Time = {
        DataSource = GAM1_Timer_DDB
        Type = uint32
        NumberOfElements = 1
      }
    }
  }
  +GAM1 = {
    Class = IOGAM
    InputSignals = {
      GAM1_INPUTS_INGRESSO1_VALUE = {
        DataSource = GAM1_TreeInput
        Type = float32
        NumberOfDimensions = 0
        NumberOfElements = 1
      }
      GAM1_INPUTS_INGRESSO2_VALUE = {
        DataSource = GAM1_TreeInput
        Type = int32
        NumberOfDimensions = 0
        NumberOfElements = 1
      }
    }
    OutputSignals = {
      PrimaUscita = {
        DataSource = GAM1_Output_DDB
        Type = float32
        NumberOfDimensions = 0
        NumberOfElements = 1
      }
      SecondaUscita = {
        DataSource = GAM1_Output_DDB
        Type = int32
        NumberOfDimensions = 0
        NumberOfElements = 1
      }
    }
  }
  +GAM1_TreeOutIOGAM = {
    Class = IOGAM
    InputSignals = {
      PrimaUscita = {
        DataSource = GAM1_Output_DDB
      }
      SecondaUscita = {
        DataSource = GAM1_Output_DDB
      }
    }
    OutputSignals = {
      PrimaUscita = {
        DataSource = GAM1_TreeOutput
        Type = float32
        NumberOfDimensions = 0
        NumberOfElements = 1
      }
      SecondaUscita = {
        DataSource = GAM1_TreeOutput
        Type = int32
        NumberOfDimensions = 0
        NumberOfElements = 1
      }
    }
  }
  +STREAM_IOGAM = {
    Class = IOGAM
    InputSignals = {
      Time = {
      DataSource = GAM1_Timer_DDB
      }
      PrimaUscita = {
        DataSource = GAM1_Output_DDB
        Type = float32
        NumberOfDimensions = 0
        NumberOfElements = 1
      }
    }
    OutputSignals = {
      Time = {
        DataSource = STREAM
        Type = int32
        NumberOfDimensions = 0
        NumberOfElements = 1
      }
      PrimaUscita = {
        DataSource = STREAM
        Type = float32
        NumberOfDimensions = 0
        NumberOfElements = 1
      }
    }
  }
 }
 +Data = {
  Class = ReferenceContainer
 +IDLE_MDSPLUS_TIMER = {
   Class = LinuxTimer
   SleepNature = "Default"
   Signals = {
     Counter = {
       Type = uint32
     }
     Time = {
       Type = uint32
     }
   }
 }
 +IDLE_MDSPLUS_DDB = {
   Class = GAMDataSource
 }
  +Timings = {
      Class = TimingDataSource
  }
  +GAM1_Timer = {
    Class = LinuxTimer
    SleepNature = "Default"
    Signals = {
      Counter = {
        Type = uint32
      }
      Time = {
        Type = uint32
      }
    }
  }
  +GAM1_Timer_DDB = {
    Class = GAMDataSource
 }
  +GAM1_TreeInput = {
    Class = MDSReaderNS
    UseColumnOrder = 0
    TreeName = "TEST"
    ShotNumber = 1
    StartTime = 0
    Frequency = 10
    Signals = { 
      GAM1_INPUTS_INGRESSO1_VALUE = {
        DataExpr = "\TEST::TOP:SEG10"
        TimebaseExpr = "dim_of(\TEST::TOP:SEG10)"
        NumberOfElements = 1
        UseColumnOrder = 0
        DataManagement = 1
      }
      GAM1_INPUTS_INGRESSO2_VALUE = {
        DataExpr = "\TEST::TOP:SEG11"
        TimebaseExpr = "dim_of(\TEST::TOP:SEG11)"
        NumberOfElements = 1
        UseColumnOrder = 0
        DataManagement = 1
      }
      timebase = {
        NumberOfElements = 1
        Type = uint64
	 }
    }
  }
  +GAM1_Output_DDB = {
    Class = GAMDataSource
  }
  +GAM1_TreeOutput = {
    Class = MDSWriter
    NumberOfBuffers = 1000
    CPUMask = 15
    StackSize = 10000000
    TreeName = "TEST"
    PulseNumber = 1
    StoreOnTrigger = 0
    EventName = "GAM1UpdatejScope"
    TimeRefresh = 1
    Signals = {
      PrimaUscita = {
        NodeName = "\TEST::TOP:GAM1.OUTPUTS.PRIMAUSCITA:VALUE"
        Period = 0.1
        MakeSegmentAfterNWrites = 100
        AutomaticSegmentation = 0
      }
      SecondaUscita = {
        NodeName = "\TEST::TOP:GAM1.OUTPUTS.SECONDAUSCIT:VALUE"
        Period = 0.1
        MakeSegmentAfterNWrites = 100
        AutomaticSegmentation = 0
      }
    }
  }
  +STREAM = {
    Class = StreamOut
    TimeIdx = 0
    Signals = {
      Time = {
        Type = int32
        NumberOfDimensions = 0
        NumberOfElements = 1
      }
      PrimaUscita = {
        Type = float32
        NumberOfDimensions = 0
        NumberOfElements = 1
      }
    }
  }
  }
 +States = {
  Class = ReferenceContainer
  +IDLE = {
    Class = RealTimeState
    +Threads = {
      Class = ReferenceContainer
        +Thread1 = {
          Class = RealTimeThread
          Functions = {IDLE_MDSPLUS}
        }
      }
    }
  +State1 = {
  Class = RealTimeState
  +Threads = {
    Class = ReferenceContainer
    +Thread1 = {
      Class = RealTimeThread
      CPUs = 255
      Functions = {GAM1Timer_IOGAM GAM1 GAM1_TreeOutIOGAM STREAM_IOGAM }
     }
   }
  }
 }
 +Scheduler = {
   Class = GAMScheduler
   TimingDataSource = Timings
 }
}
